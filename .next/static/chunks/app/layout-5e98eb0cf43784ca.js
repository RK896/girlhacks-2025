(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6734:function(e,t,r){Promise.resolve().then(r.bind(r,4348)),Promise.resolve().then(r.t.bind(r,343,23)),Promise.resolve().then(r.t.bind(r,7960,23))},4348:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return c},a:function(){return s}});var o=r(7437),i=r(2265),n=r(1614);let a=(0,i.createContext)();function s(){return(0,i.useContext)(a)}function c(e){let{children:t}=e,[r,s]=(0,i.useState)(null),[c,u]=(0,i.useState)(!0),l=async(e,t,r)=>{try{let o=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:r})}),i=await o.json();if(!o.ok)throw Error(i.error||"Registration failed");return(0,n.setCookie)("token",i.token,{maxAge:604800}),s(i.user),i}catch(e){throw e}},f=async(e,t)=>{try{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),o=await r.json();if(!r.ok)throw Error(o.error||"Login failed");return(0,n.setCookie)("token",o.token,{maxAge:604800}),s(o.user),o}catch(e){throw e}},d=async()=>{throw Error("Google login not implemented yet")},p=async()=>{try{let e=(0,n.getCookie)("token");if(!e){u(!1);return}let t=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();s(e.user)}else(0,n.deleteCookie)("token"),s(null)}catch(e){console.error("Auth check failed:",e),(0,n.deleteCookie)("token"),s(null)}finally{u(!1)}};return(0,i.useEffect)(()=>{p()},[]),(0,o.jsx)(a.Provider,{value:{currentUser:r,signup:l,login:f,loginWithGoogle:d,logout:()=>{(0,n.deleteCookie)("token"),s(null)}},children:!c&&t})}},469:function(e,t){"use strict";t.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");var r={},i=e.length;if(i<2)return r;var n=t&&t.decode||l,a=0,s=0,f=0;do{if(-1===(s=e.indexOf("=",a)))break;if(-1===(f=e.indexOf(";",a)))f=i;else if(s>f){a=e.lastIndexOf(";",s-1)+1;continue}var d=c(e,a,s),p=u(e,s,d),h=e.slice(d,p);if(!o.call(r,h)){var k=c(e,s+1,f),y=u(e,f,k);34===e.charCodeAt(k)&&34===e.charCodeAt(y-1)&&(k++,y--);var v=e.slice(k,y);r[h]=function(e,t){try{return t(e)}catch(t){return e}}(v,n)}a=f+1}while(a<i);return r},t.serialize=function(e,t,o){var c=o&&o.encode||encodeURIComponent;if("function"!=typeof c)throw TypeError("option encode is invalid");if(!i.test(e))throw TypeError("argument name is invalid");var u=c(t);if(!n.test(u))throw TypeError("argument val is invalid");var l=e+"="+u;if(!o)return l;if(null!=o.maxAge){var f=Math.floor(o.maxAge);if(!isFinite(f))throw TypeError("option maxAge is invalid");l+="; Max-Age="+f}if(o.domain){if(!a.test(o.domain))throw TypeError("option domain is invalid");l+="; Domain="+o.domain}if(o.path){if(!s.test(o.path))throw TypeError("option path is invalid");l+="; Path="+o.path}if(o.expires){var d=o.expires;if("[object Date]"!==r.call(d)||isNaN(d.valueOf()))throw TypeError("option expires is invalid");l+="; Expires="+d.toUTCString()}if(o.httpOnly&&(l+="; HttpOnly"),o.secure&&(l+="; Secure"),o.partitioned&&(l+="; Partitioned"),o.priority)switch("string"==typeof o.priority?o.priority.toLowerCase():o.priority){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(o.sameSite)switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l};var r=Object.prototype.toString,o=Object.prototype.hasOwnProperty,i=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,n=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/;function c(e,t,r){do{var o=e.charCodeAt(t);if(32!==o&&9!==o)return t}while(++t<r);return r}function u(e,t,r){for(;t>r;){var o=e.charCodeAt(--t);if(32!==o&&9!==o)return t+1}return r}function l(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}},1614:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)0>t.indexOf(o[i])&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(r[o[i]]=e[o[i]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.hasCookie=t.deleteCookie=t.setCookie=t.getCookie=t.getCookies=void 0;var n=r(469),a=function(){return"undefined"!=typeof window},s=function(e){return!!e&&"getAll"in e&&"set"in e&&"function"==typeof e.getAll&&"function"==typeof e.set},c=function(e){return!!(null==e?void 0:e.req)&&"cookies"in e.req&&s(null==e?void 0:e.req.cookies)||!!(null==e?void 0:e.res)&&"cookies"in e.res&&s(null==e?void 0:e.res.cookies)||!!(null==e?void 0:e.cookies)&&s(e.cookies())},u=function(e){var t={};return e.getAll().forEach(function(e){var r=e.name,o=e.value;t[r]=o}),t},l=function(e){try{if("string"==typeof e)return e;return JSON.stringify(e)}catch(t){return e}};t.getCookies=function(e){if(c(e)){if(null==e?void 0:e.req)return u(e.req.cookies);if(null==e?void 0:e.cookies)return u(e.cookies())}if(e&&(t=e.req),!a())return t&&t.cookies?t.cookies:t&&t.headers.cookie?(0,n.parse)(t.headers.cookie):{};for(var t,r={},o=document.cookie?document.cookie.split("; "):[],i=0,s=o.length;i<s;i++){var l=o[i].split("="),f=l.slice(1).join("=");r[l[0]]=f}return r},t.getCookie=function(e,r){var o=(0,t.getCookies)(r)[e];if(void 0!==o)return o?o.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):o},t.setCookie=function(e,t,r){if(c(r)){var s,u,f,d=r.req,p=r.res,h=r.cookies,k=i(r,["req","res","cookies"]),y=o({name:e,value:l(t)},k);d&&d.cookies.set(y),p&&p.cookies.set(y),h&&h().set(y);return}if(r){var d=r.req,p=r.res,v=i(r,["req","res"]);u=d,f=p,s=v}var g=(0,n.serialize)(e,l(t),o({path:"/"},s));if(a())document.cookie=g;else if(f&&u){var m=f.getHeader("Set-Cookie");if(Array.isArray(m)||(m=m?[String(m)]:[]),f.setHeader("Set-Cookie",m.concat(g)),u&&u.cookies){var w=u.cookies;""===t?delete w[e]:w[e]=l(t)}if(u&&u.headers&&u.headers.cookie){var w=(0,n.parse)(u.headers.cookie);""===t?delete w[e]:w[e]=l(t),u.headers.cookie=Object.entries(w).reduce(function(e,t){return e.concat("".concat(t[0],"=").concat(t[1],";"))},"")}}},t.deleteCookie=function(e,r){return(0,t.setCookie)(e,"",o(o({},r),{maxAge:-1}))},t.hasCookie=function(e,r){return!!e&&(0,t.getCookies)(r).hasOwnProperty(e)}},7960:function(){},343:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[258,971,117,744],function(){return e(e.s=6734)}),_N_E=e.O()}]);