"use strict";(()=>{var e={};e.id=873,e.ids=[873],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},6162:e=>{e.exports=require("stream")},1764:e=>{e.exports=require("util")},166:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>w,staticGenerationAsyncStorage:()=>g});var s={};t.r(s),t.d(s,{POST:()=>c});var a=t(9303),n=t(8716),o=t(670),i=t(7070),u=t(1806),l=t(3077),p=t(1482),d=t.n(p);async function c(e){try{let{email:r,password:t}=await e.json();if(!r||!t)return i.NextResponse.json({error:"Email and password are required"},{status:400});await (0,u.Z)();let s=await l.Z.findOne({email:r});if(!s||!await s.comparePassword(t))return i.NextResponse.json({error:"Invalid email or password"},{status:401});s.lastLogin=new Date,await s.save();let a=d().sign({userId:s._id,email:s.email},process.env.JWT_SECRET,{expiresIn:"7d"});return i.NextResponse.json({message:"Login successful",user:{id:s._id,email:s.email,name:s.name},token:a})}catch(e){return console.error("Login error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"C:\\Users\\shiva\\Documents\\GitHub\\girlhacks-2025-main\\girlhacks-2025\\app\\api\\auth\\login\\route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:g,serverHooks:w}=m,f="/api/auth/login/route";function v(){return(0,o.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:g})}},1806:(e,r,t)=>{t.d(r,{Z:()=>i});var s=t(1185),a=t.n(s);let n=process.env.MONGODB_URI;if(!n)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let o=global.mongoose;o||(o=global.mongoose={conn:null,promise:null});let i=async function(){if(o.conn)return o.conn;o.promise||(o.promise=a().connect(n,{bufferCommands:!1}).then(e=>e));try{o.conn=await o.promise}catch(e){throw o.promise=null,e}return o.conn}},3077:(e,r,t)=>{t.d(r,{Z:()=>u});var s=t(1185),a=t.n(s),n=t(2023),o=t.n(n);let i=new(a()).Schema({email:{type:String,required:[!0,"Email is required"],unique:!0,lowercase:!0,trim:!0},password:{type:String,required:[!0,"Password is required"],minlength:[6,"Password must be at least 6 characters"]},name:{type:String,required:[!0,"Name is required"],trim:!0},createdAt:{type:Date,default:Date.now},lastLogin:{type:Date,default:Date.now}});i.pre("save",async function(e){if(!this.isModified("password"))return e();try{let r=await o().genSalt(12);this.password=await o().hash(this.password,r),e()}catch(r){e(r)}}),i.methods.comparePassword=async function(e){return o().compare(e,this.password)},i.methods.toJSON=function(){let e=this.toObject();return delete e.password,e};let u=a().models.User||a().model("User",i)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[276,972,944],()=>t(166));module.exports=s})();