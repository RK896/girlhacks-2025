(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{4482:function(e,t){"use strict";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=parse,t.serialize=serialize;var r=Object.prototype.toString,o=Object.prototype.hasOwnProperty,i=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,n=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/;function parse(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");var r={},i=e.length;if(i<2)return r;var n=t&&t.decode||decode,a=0,s=0,u=0;do{if(-1===(s=e.indexOf("=",a)))break;if(-1===(u=e.indexOf(";",a)))u=i;else if(s>u){a=e.lastIndexOf(";",s-1)+1;continue}var c=startIndex(e,a,s),f=endIndex(e,s,c),l=e.slice(c,f);if(!o.call(r,l)){var p=startIndex(e,s+1,u),d=endIndex(e,u,p);34===e.charCodeAt(p)&&34===e.charCodeAt(d-1)&&(p++,d--);var h=e.slice(p,d);r[l]=tryDecode(h,n)}a=u+1}while(a<i);return r}function startIndex(e,t,r){do{var o=e.charCodeAt(t);if(32!==o&&9!==o)return t}while(++t<r);return r}function endIndex(e,t,r){for(;t>r;){var o=e.charCodeAt(--t);if(32!==o&&9!==o)return t+1}return r}function serialize(e,t,r){var o=r&&r.encode||encodeURIComponent;if("function"!=typeof o)throw TypeError("option encode is invalid");if(!i.test(e))throw TypeError("argument name is invalid");var u=o(t);if(!n.test(u))throw TypeError("argument val is invalid");var c=e+"="+u;if(!r)return c;if(null!=r.maxAge){var f=Math.floor(r.maxAge);if(!isFinite(f))throw TypeError("option maxAge is invalid");c+="; Max-Age="+f}if(r.domain){if(!a.test(r.domain))throw TypeError("option domain is invalid");c+="; Domain="+r.domain}if(r.path){if(!s.test(r.path))throw TypeError("option path is invalid");c+="; Path="+r.path}if(r.expires){var l=r.expires;if(!isDate(l)||isNaN(l.valueOf()))throw TypeError("option expires is invalid");c+="; Expires="+l.toUTCString()}if(r.httpOnly&&(c+="; HttpOnly"),r.secure&&(c+="; Secure"),r.partitioned&&(c+="; Partitioned"),r.priority)switch("string"==typeof r.priority?r.priority.toLowerCase():r.priority){case"low":c+="; Priority=Low";break;case"medium":c+="; Priority=Medium";break;case"high":c+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"none":c+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return c}function decode(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}function isDate(e){return"[object Date]"===r.call(e)}function tryDecode(e,t){try{return t(e)}catch(t){return e}}},7713:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)0>t.indexOf(o[i])&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(r[o[i]]=e[o[i]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.hasCookie=t.deleteCookie=t.setCookie=t.getCookie=t.getCookies=void 0;var n=r(4482),isClientSide=function(){return"undefined"!=typeof window},isCookiesFromAppRouter=function(e){return!!e&&"getAll"in e&&"set"in e&&"function"==typeof e.getAll&&"function"==typeof e.set},isContextFromAppRouter=function(e){return!!(null==e?void 0:e.req)&&"cookies"in e.req&&isCookiesFromAppRouter(null==e?void 0:e.req.cookies)||!!(null==e?void 0:e.res)&&"cookies"in e.res&&isCookiesFromAppRouter(null==e?void 0:e.res.cookies)||!!(null==e?void 0:e.cookies)&&isCookiesFromAppRouter(e.cookies())},transformAppRouterCookies=function(e){var t={};return e.getAll().forEach(function(e){var r=e.name,o=e.value;t[r]=o}),t},stringify=function(e){try{if("string"==typeof e)return e;return JSON.stringify(e)}catch(t){return e}};t.getCookies=function(e){if(isContextFromAppRouter(e)){if(null==e?void 0:e.req)return transformAppRouterCookies(e.req.cookies);if(null==e?void 0:e.cookies)return transformAppRouterCookies(e.cookies())}if(e&&(t=e.req),!isClientSide())return t&&t.cookies?t.cookies:t&&t.headers.cookie?(0,n.parse)(t.headers.cookie):{};for(var t,r={},o=document.cookie?document.cookie.split("; "):[],i=0,a=o.length;i<a;i++){var s=o[i].split("="),u=s.slice(1).join("=");r[s[0]]=u}return r},t.getCookie=function(e,r){var o=(0,t.getCookies)(r)[e];if(void 0!==o)return o?o.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):o},t.setCookie=function(e,t,r){if(isContextFromAppRouter(r)){var a,s,u,c=r.req,f=r.res,l=r.cookies,p=i(r,["req","res","cookies"]),d=o({name:e,value:stringify(t)},p);c&&c.cookies.set(d),f&&f.cookies.set(d),l&&l().set(d);return}if(r){var c=r.req,f=r.res,h=i(r,["req","res"]);s=c,u=f,a=h}var y=(0,n.serialize)(e,stringify(t),o({path:"/"},a));if(isClientSide())document.cookie=y;else if(u&&s){var k=u.getHeader("Set-Cookie");if(Array.isArray(k)||(k=k?[String(k)]:[]),u.setHeader("Set-Cookie",k.concat(y)),s&&s.cookies){var v=s.cookies;""===t?delete v[e]:v[e]=stringify(t)}if(s&&s.headers&&s.headers.cookie){var v=(0,n.parse)(s.headers.cookie);""===t?delete v[e]:v[e]=stringify(t),s.headers.cookie=Object.entries(v).reduce(function(e,t){return e.concat("".concat(t[0],"=").concat(t[1],";"))},"")}}},t.deleteCookie=function(e,r){return(0,t.setCookie)(e,"",o(o({},r),{maxAge:-1}))},t.hasCookie=function(e,r){return!!e&&(0,t.getCookies)(r).hasOwnProperty(e)}},3353:function(e,t,r){Promise.resolve().then(r.bind(r,5748)),Promise.resolve().then(r.t.bind(r,2853,23)),Promise.resolve().then(r.t.bind(r,8712,23))},5748:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var o=r(7437),i=r(2265),n=r(7713);let a=(0,i.createContext)();function useAuth(){return(0,i.useContext)(a)}function AuthProvider(e){let{children:t}=e,[r,s]=(0,i.useState)(null),[u,c]=(0,i.useState)(!0),signup=async(e,t,r)=>{try{let o=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:r})}),i=await o.json();if(!o.ok)throw Error(i.error||"Registration failed");return(0,n.setCookie)("token",i.token,{maxAge:604800}),s(i.user),i}catch(e){throw e}},login=async(e,t)=>{try{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),o=await r.json();if(!r.ok)throw Error(o.error||"Login failed");return(0,n.setCookie)("token",o.token,{maxAge:604800}),s(o.user),o}catch(e){throw e}},loginWithGoogle=async()=>{throw Error("Google login not implemented yet")},checkAuth=async()=>{try{let e=(0,n.getCookie)("token");if(!e){c(!1);return}let t=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();s(e.user)}else(0,n.deleteCookie)("token"),s(null)}catch(e){console.error("Auth check failed:",e),(0,n.deleteCookie)("token"),s(null)}finally{c(!1)}};return(0,i.useEffect)(()=>{checkAuth()},[]),(0,o.jsx)(a.Provider,{value:{currentUser:r,signup,login,loginWithGoogle,logout:()=>{(0,n.deleteCookie)("token"),s(null)}},children:!u&&t})}},2853:function(){},8712:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o=r(2265),i=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var o,n={},c=null,f=null;for(o in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(f=t.ref),t)a.call(t,o)&&!u.hasOwnProperty(o)&&(n[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===n[o]&&(n[o]=t[o]);return{$$typeof:i,type:e,key:c,ref:f,props:n,_owner:s.current}}t.Fragment=n,t.jsx=q,t.jsxs=q},7437:function(e,t,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=3353)}),_N_E=e.O()}]);