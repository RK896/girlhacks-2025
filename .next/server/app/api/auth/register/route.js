"use strict";(()=>{var e={};e.id=2,e.ids=[2],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},6162:e=>{e.exports=require("stream")},1764:e=>{e.exports=require("util")},4011:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>x,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>w,staticGenerationAsyncStorage:()=>g});var s={};t.r(s),t.d(s,{POST:()=>c});var a=t(9303),n=t(8716),i=t(670),o=t(7070),u=t(1806),l=t(3077),p=t(1482),d=t.n(p);async function c(e){try{let{email:r,password:t,name:s}=await e.json();if(!r||!t||!s)return o.NextResponse.json({error:"Email, password, and name are required"},{status:400});if(t.length<6)return o.NextResponse.json({error:"Password must be at least 6 characters"},{status:400});if(await (0,u.Z)(),await l.Z.findOne({email:r}))return o.NextResponse.json({error:"User already exists with this email"},{status:400});let a=new l.Z({email:r,password:t,name:s});await a.save();let n=d().sign({userId:a._id,email:a.email},process.env.JWT_SECRET,{expiresIn:"7d"});return o.NextResponse.json({message:"User created successfully",user:{id:a._id,email:a.email,name:a.name},token:n})}catch(e){return console.error("Registration error:",e),o.NextResponse.json({error:"Internal server error"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"C:\\Users\\shiva\\Documents\\GitHub\\girlhacks-2025-main\\girlhacks-2025\\app\\api\\auth\\register\\route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:g,serverHooks:w}=m,f="/api/auth/register/route";function x(){return(0,i.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:g})}},1806:(e,r,t)=>{t.d(r,{Z:()=>o});var s=t(1185),a=t.n(s);let n=process.env.MONGODB_URI;if(!n)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let i=global.mongoose;i||(i=global.mongoose={conn:null,promise:null});let o=async function(){if(i.conn)return i.conn;i.promise||(i.promise=a().connect(n,{bufferCommands:!1}).then(e=>e));try{i.conn=await i.promise}catch(e){throw i.promise=null,e}return i.conn}},3077:(e,r,t)=>{t.d(r,{Z:()=>u});var s=t(1185),a=t.n(s),n=t(2023),i=t.n(n);let o=new(a()).Schema({email:{type:String,required:[!0,"Email is required"],unique:!0,lowercase:!0,trim:!0},password:{type:String,required:[!0,"Password is required"],minlength:[6,"Password must be at least 6 characters"]},name:{type:String,required:[!0,"Name is required"],trim:!0},createdAt:{type:Date,default:Date.now},lastLogin:{type:Date,default:Date.now}});o.pre("save",async function(e){if(!this.isModified("password"))return e();try{let r=await i().genSalt(12);this.password=await i().hash(this.password,r),e()}catch(r){e(r)}}),o.methods.comparePassword=async function(e){return i().compare(e,this.password)},o.methods.toJSON=function(){let e=this.toObject();return delete e.password,e};let u=a().models.User||a().model("User",o)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[276,972,944],()=>t(4011));module.exports=s})();